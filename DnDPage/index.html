<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title class="mkEditable">RPG Card</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <style>
$containerWidth: 200px;
$containerHeight: $containerWidth;

$faceWidth:  $containerWidth*0.5;
$faceHeight: $faceWidth*0.86;

$transitionDuration: 0.5s;
$animationDuration:  3s;

$angle: 53deg;
$ringAngle: -11deg;
$sideAngle: 360deg/5;
$opacity: 0.83;
$color: rgba(255, 255, 255, $opacity);

$rotateX: -$angle;
$translateZ: $faceWidth*0.335;
$translateY: -$faceHeight*0.15;
$translateRingZ: $faceWidth*0.75;
$translateRingY: $faceHeight*0.78 + $translateY;
$translateLowerZ: $translateZ;
$translateLowerY: $faceHeight*0.78 + $translateRingY;

@keyframes roll {
  10% { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) }
  30% { transform: rotateX(120deg) rotateY(240deg) rotateZ(0deg) translateX(40px) translateY(40px) }
  50% { transform: rotateX(240deg) rotateY(480deg) rotateZ(0deg) translateX(-40px) translateY(-40px) }
  70% { transform: rotateX(360deg) rotateY(720deg) rotateZ(0deg) }
  90% { transform: rotateX(480deg) rotateY(960deg) rotateZ(0deg) }
}

body {
  background: #333;
  padding: 20px;
}

.content {
  margin: auto auto;
  position: relative;
  width: $containerWidth;
  height: $containerHeight;
  perspective: 1500px;
}

.die {
  position: absolute;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transition: transform $transitionDuration ease-out;
  cursor: pointer;
  
  transform: rotateX($rotateX);
  
  &.rolling {
    animation: roll $animationDuration linear;
  }
  
  @for $i from 1 through 5 {
    &[data-face="#{$i}"] {
      $angleMultiplier: $i - 1;
      transform: rotateX(-$angle) rotateY($sideAngle * $angleMultiplier);
    }
  }
  
  @for $i from 16 through 20 {
    &[data-face="#{$i}"] {
      $angleMultiplier: $i - 15;
      transform: rotateX(-$angle + 180deg) rotateY(-$sideAngle * $angleMultiplier);
    }
  }
  
  @for $i from 6 through 10 {
    &[data-face="#{$i}"] {
      $angleMultiplier: $i - 6;
      transform: rotateX(-$ringAngle) rotateZ(180deg) rotateY($sideAngle * $angleMultiplier);
    }
  }
  
  @for $i from 11 through 15 {
    &[data-face="#{$i}"] {
      $angleMultiplier: $i - 8;
      transform: rotateX(-$ringAngle) rotateY(-$sideAngle * $angleMultiplier - $sideAngle/2);
    }
  }
  
  .face {
    $horizontalMargin: -$faceWidth*0.5;
    
    position: absolute;
    left: 50%;
    top: 0;
    margin: 0 $horizontalMargin;
    border-left: $faceWidth*0.5 solid transparent;
    border-right: $faceWidth*0.5 solid transparent;
    border-bottom: $faceHeight solid $color;
    width: 0px;
    height: 0px;
    transform-style: preserve-3d;
    backface-visibility: hidden;
    
    counter-increment: steps 1;
  
    &:before {
      content: counter(steps);
      position: absolute;
      top: $faceHeight*0.25;
      left: -$faceWidth;
      color: #fff;
      /*text-shadow: 1px 1px 3px #000;*/
      font-size: $faceHeight*0.5;
      text-align: center;
      line-height: $faceHeight*0.9;
      width: $faceWidth*2;
      height: $faceHeight;
    }
    
    @for $i from 1 through 5 {
      &:nth-child(#{$i}) {
        $angleMultiplier: $i - 1;
        transform: rotateY(-$sideAngle * $angleMultiplier) translateZ($translateZ) translateY($translateY) rotateX($angle);
      }
    }
      
    @for $i from 16 through 20 {
      &:nth-child(#{$i}) {
        $angleMultiplier: $i - 18;
        transform: rotateY($sideAngle * $angleMultiplier + $sideAngle/2) translateZ($translateLowerZ) translateY($translateLowerY) rotateZ(180deg) rotateX($angle);
      }
    }
      
    @for $i from 6 through 10 {
      &:nth-child(#{$i}) {
        $angleMultiplier: $i - 11;
        transform: rotateY(-$sideAngle * $angleMultiplier) translateZ($translateRingZ) translateY($translateRingY) rotateZ(180deg) rotateX($ringAngle);
      }
    }
      
    @for $i from 11 through 15 {
      &:nth-child(#{$i}) {
        $angleMultiplier: $i - 8;
        transform: rotateY($sideAngle * $angleMultiplier + $sideAngle/2) translateZ($translateRingZ) translateY($translateRingY) rotateX($ringAngle);
      }
    }
  }
}

h2 {
  color: #fafafa;
}

ul {
  list-style: none;
  margin: 0;
  padding: 0;
  
  > li {
    display: inline-block;
    margin: 10px 10px;
  }
}

a {
  text-align: center;
  color: #fff;
  text-decoration: none;
  font-size: 25px;
  font-weight: bold;
  padding: 5px 15px;
  width: 40px;
  display: inline-block;
  border: 1px solid #dcdcdc;
  border-radius: 4px;
  background-color: #999;
      
  &.active {
    background-color: #333;
  }
      
  &:hover {
    background-color: #666;
  }
    
  &.randomize {
    width: auto;
    margin: 20px 10px;
  }
}

h3 {
  display:block;
  color:lightgrey;
}

.characterSheet {
  width:25%;
  flaot:left;
  position:relative;
}

.characterSheet form input {
  width:90%;
  height:40px;
}
    </style>
</head>
<body>
<div class="content">
  <div class="die">
	<figure class="face face-1" value="1"></figure>
    <figure class="face face-2" value="2"></figure>
    <figure class="face face-3" value="3"></figure>
    <figure class="face face-4" value="4"></figure>
    <figure class="face face-5" value="5"></figure>
    <figure class="face face-6" value="6"></figure>
    <figure class="face face-7" value="7"></figure>
    <figure class="face face-8" value="8"></figure>
    <figure class="face face-9" value="9"></figure>
    <figure class="face face-10" value="10"></figure>
    <figure class="face face-11" value="11"></figure>
    <figure class="face face-12" value="12"></figure>
    <figure class="face face-13" value="13"></figure>
    <figure class="face face-14" value="14"></figure>
    <figure class="face face-15" value="15"></figure>
    <figure class="face face-16" value="16"></figure>
    <figure class="face face-17" value="17"></figure>
    <figure class="face face-19" value="18"></figure>
    <figure class="face face-19" value="19"></figure>
    <figure class="face face-20" value="20"></figure>
</div>

<<a href="" class="randomize" id="roll">Roll!</a>
<h2 id="result"></h2>
<div class="characterSheet">
<h2>Character</h2>

<form name="myForm">
<h3>Character Name </h3>
  <input type="text" name="fname"></input>

<br>
<h3>Class</h3>
<input list="class">
<br>
<datalist id="class">
  <option value="Barbarian">
  <option value="Bard">
  <option value="Druid">
  <option value="Monk">
  <option value="Paladin">
  <option value="Ranger">
  <option value="Sorcerer">
  <option value="Warlock">
</datalist>

<br>
<h3>Level</h3>
  <input type="text" name="level"></input>

<br>
<h3>Race</h3>
<input list="races">
<br>
<datalist id="races">
  <option value="Dragonborn">
  <option value="Dwarf">
  <option value="Elf">
  <option value="Gnome">
  <option value="Half-elf">
  <option value="Half-orc">
  <option value="Halfling">
  <option value="Human">
  <option value="Tiefling">
</datalist>

<br>
<h3>Background</h3>
<input list="background">
<br>
<datalist id="background">
  <option value="Acolyte">
  <option value="Charlatan">
  <option value="Criminal">
  <option value="Entertainer">
  <option value="Folk Hero">
  <option value="Guild Artisan">
  <option value="Hermit">
  <option value="Noble">
  <option value="Outlander">
  <option value="Sage">
  <option value="Sailor">
  <option value="Soldier">
  <option value="Urchin">
</datalist>

<br>
<h3>Alignment</h3>
<input list="alignment">
<br>
<datalist id="alignment">
  <option value="Lawful good">
  <option value="Lawful neutral">
  <option value="Lawful evil">
  <option value="Neutral good">
  <option value="True neutral">
  <option value="Neutral evil">
  <option value="Chaotic good">
  <option value="Chaotic neutral">
  <option value="Chaotic evil">
</datalist>

<br>
<h3>Player Name</h3>
  <input type="text" name="playerName"></input>

<br>
<h3>Experience Points</h3>
  <input type="text" name="experiencePoints"></input>

<br>
<h3>Factions</h3>
<input list="factions">
<br>
<datalist id="factions">
  <option value="The Harpers">
  <option value="The Order of the Gauntlet">
  <option value="The Emerald Enclave">
  <option value="The Lords' Alliance">
  <option value="The Zhentarim">
  <option value="D&D Adventures League">
</datalist>

<br>
<input type="submit" value="Submit">
</form>
</div>

<div class="characterSheet">
<form id="">
<h2>Stregnth</h2>
  <input type="text" name="stregnthPoints"></input>
</form>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
 var $die = $('.die'),
    sides = 20,
    initialSide = 1,
    lastFace,
    timeoutId,
    transitionDuration = 500, 
    animationDuration  = 3000

$('ul > li > a').click(function () {
  reset()
  rollTo($(this).attr('href'))
  
  
  return false
})

function randomFace(face) {
var face = Math.floor((Math.random() * sides)) + initialSide
lastFace = face == lastFace ? randomFace() : face
return face;
}

function rollTo(face) {
  clearTimeout(timeoutId)
  
  $('ul > li > a').removeClass('active')
  $('[href=' + face + ']').addClass('active')
  
  $die.attr('data-face', face)
  
  $("h2#result").append("You rolled a " + face)
  
  return false
}

$( '.randomize, .die' ).click(function( face ) {
  return face;
});
$( '.randomize, .die' ).click(function( face ) {
  $( "h2#result" ).html( face.result );
});

function reset() {
  $die.attr('data-face', null).removeClass('rolling')
  
}

$('.randomize, .die').click(function () {
  $die.addClass('rolling')
  clearTimeout(timeoutId)
  
  timeoutId = setTimeout(function () {
    $die.removeClass('rolling')
    
    rollTo(randomFace())
  }, animationDuration)
  
  return false
})

</script>
<script type="text/javascript">( function(){ window.SIG_EXT = {}; } )()</script>
</body>
</html>
